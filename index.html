<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Libro.0 ‚Äì Pascoli</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script-common.js"></script>
  <script defer src="script-index.js"></script>

  <style>
    /* Sovrascrivo lo sfondo del modale per togliere l'effetto "cartoncino" */
    #modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 9999;
    }

    #modal-overlay[hidden] {
      display: none;
    }

    #modal-overlay .modal {
      width: 100%;
      height: 100%;
      position: relative;
      background: transparent;   /* niente riquadro chiaro */
      box-shadow: none;
    }

    /* wrapper che centra l'immagine ingrandita */
    .modal-center-wrapper {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-center-wrapper img {
      /* FORZO l‚Äôimmagine a riempire lo schermo quasi del tutto */
      width: 90vw;
      max-width: 90vw;
      max-height: 90vh;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 18px rgba(0,0,0,0.5);
      cursor: pointer;
    }

    /* pulsante X in alto a destra */
    #modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 1.8rem;
      line-height: 1;
      background: #ffffff;
      border-radius: 999px;
      padding: 0.1rem 0.6rem;
      border: none;
      cursor: pointer;
    }
  </style>
</head>

<body data-page="index">
  <header class="top-bar">
    <div class="logo-area">
      <span class="logo-main">Libro.0</span>
      <span class="logo-sub">Lo spazio del pensare</span>
    </div>

    <div class="theme-switcher" aria-label="Selettore tema">
      <button data-theme="A">A</button>
      <button data-theme="B">B</button>
      <button data-theme="C">C</button>
      <button data-theme="D">D</button>
      <button data-theme="E">E</button>
    </div>

    <nav class="tools-nav" aria-label="Strumenti Libro.0">
      <button class="tool-btn" data-tool="mappe">üó∫Ô∏è Mappe</button>
      <button class="tool-btn" data-tool="lavagna">üìù Lavagna</button>
      <button class="tool-btn" data-tool="archivio">üìÅ Archivio</button>
    </nav>
  </header>

  <main class="intro-main">
    <section class="intro-hero">
      <!-- Colonna testo -->
      <div class="intro-text">
        <h1>Giovanni Pascoli nel Libro.0</h1>

        <p>
          Questo ambiente non √® una semplice scheda di letteratura, ma una stanza del Libro.0:
          qui la lezione scritta convive con schemi, immagini, video e strumenti che trasformano
          lo studente in autore attivo del proprio studio.
        </p>

        <p>
          Puoi leggere i testi, evidenziare, prendere appunti, inviare concetti alle mappe,
          alla timeline o alla lavagna virtuale. Ogni gesto lascia traccia in una memoria lunga,
          che resta tua.
        </p>

        <h2>Capitoli di Pascoli</h2>
        <ol class="chapter-list intro-list">
          <li><a href="stupore.html">1 ¬∑ Lo stupore</a></li>
          <li><a href="visione.html">2 ¬∑ Visione del mondo</a></li>
          <li><a href="fanciullino.html">3 ¬∑ Poetica del fanciullino</a></li>
          <li><a href="forma.html">4 ¬∑ La forma</a></li>
          <li><a href="simbolismo.html">5 ¬∑ Il simbolismo</a></li>
        </ol>

        <!-- NUOVA SEZIONE: I testi -->
        <h2>I testi</h2>
        <ul class="chapter-list intro-list">
          <li>
            <a href="gelsomino/gitkeep/index.html" target="_blank">
              Il gelsomino notturno ‚Äì lezione interattiva
            </a>
          </li>
        </ul>
      </div>

      <!-- Colonna media -->
      <div class="intro-media">
        <!-- Copertina + video nello stesso spazio -->
        <figure class="video-cover-wrapper" style="max-width:260px; margin:0 auto;">
          <div id="cover-wrapper">
            <img
              id="pascoli-cover"
              src="assets/pascoli_video.png"
              alt="Introduzione a Pascoli"
              style="width:100%; height:auto; cursor:pointer; display:block;"
            />
          </div>

          <!-- Il video viene gestito da script-index.js, mantenendo stessa posizione/dimensione -->
          <div id="video-container" hidden>
            <div
              style="position:relative; width:100%; padding-top:56.25%; overflow:hidden; border-radius:12px;"
            >
              <iframe
                src="https://app.heygen.com/embedded-player/921a340e480a48fa94d440855d633b4a"
                title="HeyGen video player"
                frameborder="0"
                allow="encrypted-media; fullscreen;"
                allowfullscreen
                style="position:absolute; top:0; left:0; width:100%; height:100%;"
              ></iframe>
            </div>

            <button id="btn-back-to-cover" class="back-btn" style="margin-top:0.5rem;">
              ‚èπ Torna all'immagine
            </button>
          </div>

          <figcaption style="text-align:center; margin-top:0.5rem;">
            Clicca l'immagine per avviare il video introduttivo.
          </figcaption>
        </figure>

        <!-- Seconda immagine: piccola nella pagina, grande a schermo intero al click -->
        <figure class="intro-image">
          <img
            id="pascoli-intro"
            src="assets/Pascoli-intro.png"
            alt="Giovanni Pascoli ‚Äì immagine introduttiva"
            style="max-width:260px; width:100%; height:auto; margin:1.5rem auto 0.5rem auto; cursor:pointer; display:block;"
          />
          <figcaption style="text-align:center;">
            Giovanni Pascoli, tra biografia, visione del mondo e simboli.
          </figcaption>
        </figure>
      </div>
    </section>
  </main>

  <!-- Modale generale -->
  <div id="modal-overlay" class="modal-overlay" hidden>
    <div class="modal">
      <button id="modal-close">‚úï</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- Script per zoom dell'immagine Pascoli-intro -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const introImg = document.getElementById('pascoli-intro');
      const modalOverlay = document.getElementById('modal-overlay');
      const modalContent = document.getElementById('modal-content');
      const modalClose = document.getElementById('modal-close');

      if (introImg && modalOverlay && modalContent && modalClose) {
        introImg.addEventListener('click', () => {
          // svuota il contenuto precedente
          modalContent.innerHTML = '';

          // wrapper che centra l'immagine
          const wrapper = document.createElement('div');
          wrapper.className = 'modal-center-wrapper';

          // clono l'immagine ma SENZA lo stile piccolo: la gestiamo da CSS
          const bigImg = introImg.cloneNode();
          bigImg.removeAttribute('style'); // togliamo max-width:260px ecc.

          wrapper.appendChild(bigImg);
          modalContent.appendChild(wrapper);
          modalOverlay.hidden = false;

          const closeModal = () => {
            modalOverlay.hidden = true;
            modalContent.innerHTML = '';
          };

          // clic sull'immagine grande
          bigImg.addEventListener('click', closeModal);

          // clic sullo sfondo scuro
          modalOverlay.addEventListener(
            'click',
            (e) => {
              if (e.target === modalOverlay) {
                closeModal();
              }
            },
            { once: true }
          );

          // pulsante X
          modalClose.addEventListener(
            'click',
            () => {
              closeModal();
            },
            { once: true }
          );
        });
      }
    });
  </script>
</body>
</html>
